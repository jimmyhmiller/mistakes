function stringify(t){function e(t){return null===t||void 0===t?"":t.constructor.name?" // "+t.constructor.name:""}if("function"==typeof t)return"[function"+(t.name?" "+t.name:"")+"]";try{return JSON.stringify(t)+e(t)}catch(n){return""}}function xhr(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=e,n.send()}function mistakes(__div){function require(t){for(var e=document.head.getElementsByTagName("script"),n=0;e.length>n;n++)if(e[n].src==t)return"loaded";var r=document.head.appendChild(document.createElement("script"));r.onload=__runCodes,r.src=t}function __runCodes(){for(var ____v=__editor.getValue().split("\n"),____res="",____i=0;____v.length>____i;____i++){var ____line=____v[____i];if(____line)try{____res+=____line.match(/^\s*?\/\//)?"\n":stringify(function(____js){return eval(____js)}(____v.slice(0,____i+1).join("\n")))+"\n"}catch(e){____res+=e instanceof SyntaxError?"\n":e}else ____res+="\n"}__result.setValue(____res)}function __showGistButton(t){var e=document.getElementById("gist-button");e.style.display="inline",e.href="https://gist.github.com/"+t}function __gist(t){function e(t){if(t.match(/readme/gi))return!1;var e=t.split("."),n=e[e.length-1];return e.length>1&&"js"!==n&&"txt"!==n?!1:!0}-1!==t.indexOf(".js")?xhr("local/"+t,function(){return __content(this.response)}):xhr("https://api.github.com/gists/"+t,function(){__showGistButton(t);var n=JSON.parse(this.response);for(var r in n.files)if(e(r))return __content(n.files[r].content)})}function __content(t){return __editor.setValue(t),__s}var __s={},__inner=__div.innerHTML;__div.innerHTML="",__div.className=__div.className+" sl-wrap";var __left=__div.appendChild(document.createElement("div")),__right=__div.appendChild(document.createElement("right")),__code=__left.appendChild(document.createElement("textarea")),__results=__right.appendChild(document.createElement("pre"));__code.value=__inner,__left.className="sl-left",__right.className="sl-right",__code.className="code",__results.className="results";var __editor=CodeMirror.fromTextArea(__code,{mode:"javascript",matchBrackets:!0,onChange:__runCodes,tabSize:2,autofocus:!0,smartIndent:!0}),__result=CodeMirror.fromTextArea(__results,{mode:"javascript",tabSize:2,readOnly:!0});return __s.gist=__gist,__s.content=__content,__s}var CodeMirror=function(){function t(l,f){function y(t){return t>=0&&or.size>t}function b(t){return d(or,t)}function L(t,e){gr=!0;for(var n=e-t.height,r=t;r;r=r.parent)r.height+=n}function T(t){var e={line:0,ch:0};pe(e,{line:or.size-1,ch:b(or.size-1).text.length},re(t),e,e),fr=!0}function U(){var t=[];return or.iter(0,or.size,function(e){t.push(e.text)}),t.join("\n")}function K(t){function e(t){var n=Mn(t,!0);if(n&&!N(n,a)){nr||he(),a=n,Be(i,n),fr=!1;var r=He();(n.line>=r.to||n.line<r.from)&&(l=setTimeout(Dn(function(){e(t)}),150))}}function n(t){clearTimeout(l);var e=Mn(t);e&&Be(i,e),C(t),Le(),fr=!0,u(),s()}Ie(_(t,"shiftKey"));for(var r=k(t);r!=Bn;r=r.parentNode)if(r.parentNode==Kn&&r!=jn)return;for(var r=k(t);r!=Bn;r=r.parentNode)if(r.parentNode==Gn)return On.onGutterClick&&On.onGutterClick(Nr,I(Gn.childNodes,r)+_r,t),C(t);var i=Mn(t);switch(M(t)){case 3:return X&&!V&&_n(t),void 0;case 2:return i&&Ue(i.line,i.ch,!0),void 0}if(!i)return k(t)==Un&&C(t),void 0;nr||he();var o=+new Date;if(sr&&sr.time>o-400&&N(sr.pos,i))return C(t),setTimeout(Le,20),$e(i.line);if(ar&&ar.time>o-400&&N(ar.pos,i))return sr={time:o,pos:i},C(t),Ze(i);ar={time:o,pos:i};var l,a=i;if(te&&!On.readOnly&&!N(Cr.from,Cr.to)&&!W(i,Cr.from)&&!W(Cr.to,i)){J&&(Yn.draggable=!0);var s=S(document,"mouseup",Dn(function(e){J&&(Yn.draggable=!1),ur=!1,s(),10>Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)&&(C(e),Ue(i.line,i.ch,!0),Le())}),!0);return ur=!0,Yn.dragDrop&&Yn.dragDrop(),void 0}C(t),Ue(i.line,i.ch,!0);var u=S(document,"mousemove",Dn(function(t){clearTimeout(l),C(t),Z||M(t)?e(t):n(t)}),!0),s=S(document,"mouseup",Dn(n),!0)}function G(t){for(var e=k(t);e!=Bn;e=e.parentNode)if(e.parentNode==Gn)return C(t);var n=Mn(t);n&&(sr={time:+new Date,pos:n},C(t),Ze(n))}function ee(t){function e(t,e){var r=new FileReader;r.onload=function(){o[e]=r.result,++l==i&&(n=je(n),Dn(function(){var t=xe(o.join(""),n,n);Be(n,t)})())},r.readAsText(t)}t.preventDefault();var n=Mn(t,!0),r=t.dataTransfer.files;if(n&&!On.readOnly)if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),l=0,a=0;i>a;++a)e(r[a],a);else try{var o=t.dataTransfer.getData("Text");if(o){var s=Cr.from,u=Cr.to;Be(n,n),ur&&xe("",s,u),Ce(o),Le()}}catch(t){}}function ne(t){var e=ke();if(t.dataTransfer.setData("Text",e),X||q){var n=document.createElement("img");n.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=",t.dataTransfer.setDragImage(n,0,0)}}function le(t,e){if("string"==typeof t&&(t=F[t],!t))return!1;var n=lr;try{On.readOnly&&(kr=!0),e&&(lr=null),t(Nr)}catch(r){if(r!=Y)throw r;return!1}finally{lr=n,kr=!1}return!0}function ae(t){var i=e(On.keyMap),o=i.auto;clearTimeout(Hr),o&&!r(t)&&(Hr=setTimeout(function(){e(On.keyMap)==i&&(On.keyMap=o.call?o.call(null,Nr):o)},50));var l=oe[_(t,"keyCode")],a=!1;return null==l||t.altGraphKey?!1:(_(t,"altKey")&&(l="Alt-"+l),_(t,"ctrlKey")&&(l="Ctrl-"+l),_(t,"metaKey")&&(l="Cmd-"+l),a=_(t,"shiftKey")?n("Shift-"+l,On.extraKeys,On.keyMap,function(t){return le(t,!0)})||n(l,On.extraKeys,On.keyMap,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?le(t):void 0}):n(l,On.extraKeys,On.keyMap,le),a&&(C(t),Z&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),a)}function se(t,e){var r=n("'"+e+"'",On.extraKeys,On.keyMap,le);return r&&C(t),r}function ue(t){if(nr||he(),Z&&27==t.keyCode&&(t.returnValue=!1),Dr&&Se()&&(Dr=!1),!On.onKeyEvent||!On.onKeyEvent(Nr,x(t))){var e=_(t,"keyCode");Ie(16==e||_(t,"shiftKey"));var n=ae(t);window.opera&&(Wr=n?e:null,!n&&88==e&&_(t,V?"metaKey":"ctrlKey")&&Ce(""))}}function fe(t){if(Dr&&Se(),!On.onKeyEvent||!On.onKeyEvent(Nr,x(t))){var e=_(t,"keyCode"),n=_(t,"charCode");if(window.opera&&e==Wr)return Wr=null,C(t),void 0;if(!(window.opera&&!t.which||Q)||!ae(t)){var r=String.fromCharCode(null==n?e:n);On.electricChars&&tr.electricChars&&On.smartIndent&&!On.readOnly&&tr.electricChars.indexOf(r)>-1&&setTimeout(Dn(function(){qe(Cr.to.line,"smart")}),75),se(t,r)||_e()}}}function ce(t){On.onKeyEvent&&On.onKeyEvent(Nr,x(t))||16==_(t,"keyCode")&&(lr=null)}function he(){"nocursor"!=On.readOnly&&(nr||(On.onFocus&&On.onFocus(Nr),nr=!0,-1==Bn.className.search(/\bCodeMirror-focused\b/)&&(Bn.className+=" CodeMirror-focused"),mr||Ae(!0)),Me(),Sn())}function de(){nr&&(On.onBlur&&On.onBlur(Nr),nr=!1,yr&&Dn(function(){yr&&(yr(),yr=null)})(),Bn.className=Bn.className.replace(" CodeMirror-focused","")),clearInterval(Qn),setTimeout(function(){nr||(lr=null)},150)}function pe(t,e,n,r,i){if(!kr){if(Er){var o=[];for(or.iter(t.line,e.line+1,function(t){o.push(t.text)}),Er.addChange(t.line,n.length,o);Er.done.length>On.undoDepth;)Er.done.shift()}ye(t,e,n,r,i)}}function me(t,e){if(t.length){for(var n=t.pop(),r=[],i=n.length-1;i>=0;i-=1){var o=n[i],l=[],a=o.start+o.added;or.iter(o.start,a,function(t){l.push(t.text)}),r.push({start:o.start,added:o.old.length,old:l});var s=je({line:o.start+o.old.length-1,ch:R(l[l.length-1],o.old[o.old.length-1])});ye({line:o.start,ch:0},{line:a-1,ch:b(a-1).text.length},o.old,s,s)}fr=!0,e.push(r)}}function ge(){me(Er.done,Er.undone)}function ve(){me(Er.undone,Er.done)}function ye(t,e,n,r,i){function o(t){return Math.min(e.line,e.line+y)>=t?t:t+y}if(!kr){var l=!1,a=Lr.length;On.lineWrapping||or.iter(t.line,e.line,function(t){return t.text.length==a?(l=!0,!0):void 0}),(t.line!=e.line||n.length>1)&&(gr=!0);var s=e.line-t.line,f=b(t.line),c=b(e.line);if(0==t.ch&&0==e.ch&&""==n[n.length-1]){var h=[],d=null;t.line?(d=b(t.line-1),d.fixMarkEnds(c)):c.fixMarkStarts();for(var p=0,m=n.length-1;m>p;++p)h.push(u.inheritMarks(n[p],d));s&&or.remove(t.line,s,vr),h.length&&or.insert(t.line,h)}else if(f==c)if(1==n.length)f.replace(t.ch,e.ch,n[0]);else{c=f.split(e.ch,n[n.length-1]),f.replace(t.ch,null,n[0]),f.fixMarkEnds(c);for(var h=[],p=1,m=n.length-1;m>p;++p)h.push(u.inheritMarks(n[p],f));h.push(c),or.insert(t.line+1,h)}else if(1==n.length)f.replace(t.ch,null,n[0]),c.replace(null,e.ch,""),f.append(c),or.remove(t.line+1,s,vr);else{var h=[];f.replace(t.ch,null,n[0]),c.replace(null,e.ch,n[n.length-1]),f.fixMarkEnds(c);for(var p=1,m=n.length-1;m>p;++p)h.push(u.inheritMarks(n[p],f));s>1&&or.remove(t.line+1,s-1,vr),or.insert(t.line+1,h)}if(On.lineWrapping){var g=Un.clientWidth/bn()-3;or.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/g)||1;e!=t.height&&L(t,e)}})}else or.iter(t.line,p+n.length,function(t){var e=t.text;e.length>a&&(Lr=e,a=e.length,xr=null,l=!1)}),l&&(a=0,Lr="",xr=null,or.iter(0,or.size,function(t){var e=t.text;e.length>a&&(a=e.length,Lr=e)}));for(var v=[],y=n.length-s-1,p=0,x=er.length;x>p;++p){var C=er[p];t.line>C?v.push(C):C>e.line&&v.push(C+y)}var w=t.line+Math.min(n.length,500);En(t.line,w),v.push(w),er=v,Hn(100),hr.push({from:t.line,to:e.line+1,diff:y});var k={from:t,to:e,text:n};if(dr){for(var M=dr;M.next;M=M.next);M.next=k}else dr=k;Pe(r,i,o(Cr.from.line),o(Cr.to.line)),Un.clientHeight&&(Kn.style.height=or.height*Cn()+2*wn()+"px")}}function xe(t,e,n){function r(r){if(W(r,e))return r;if(!W(n,r))return i;var o=r.line+t.length-(n.line-e.line)-1,l=r.ch;return r.line==n.line&&(l+=t[t.length-1].length-(n.ch-(n.line==e.line?e.ch:0))),{line:o,ch:l}}e=je(e),n=n?je(n):e,t=re(t);var i;return be(t,e,n,function(t){return i=t,{from:r(Cr.from),to:r(Cr.to)}}),i}function Ce(t,e){be(re(t),Cr.from,Cr.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:Cr.from,to:Cr.from}:{from:Cr.from,to:t}})}function be(t,e,n,r){var i=1==t.length?t[0].length+e.ch:t[t.length-1].length,o=r({line:e.line+t.length-1,ch:i});pe(e,n,t,o.from,o.to)}function we(t,e){var n=t.line,r=e.line;if(n==r)return b(n).text.slice(t.ch,e.ch);var i=[b(n).text.slice(t.ch)];return or.iter(n+1,r,function(t){i.push(t.text)}),i.push(b(r).text.slice(0,e.ch)),i.join("\n")}function ke(){return we(Cr.from,Cr.to)}function Me(){Dr||rr.set(On.pollInterval,function(){Nn(),Se(),nr&&Me(),Wn()})}function _e(){function t(){Nn();var n=Se();n||e?(Dr=!1,Me()):(e=!0,rr.set(60,t)),Wn()}var e=!1;Dr=!0,rr.set(20,t)}function Se(){if(mr||!nr||ie(Vn)||On.readOnly)return!1;var t=Vn.value;if(t==Or)return!1;lr=null;for(var e=0,n=Math.min(Or.length,t.length);n>e&&Or[e]==t[e];)++e;return Or.length>e?Cr.from={line:Cr.from.line,ch:Cr.from.ch-(Or.length-e)}:wr&&N(Cr.from,Cr.to)&&(Cr.to={line:Cr.to.line,ch:Math.min(b(Cr.to.line).text.length,Cr.to.ch+(t.length-e))}),Ce(t.slice(e),"end"),Or=t,!0}function Ae(t){N(Cr.from,Cr.to)?t&&(Or=Vn.value=""):(Or="",Vn.value=ke(),H(Vn))}function Le(){"nocursor"!=On.readOnly&&Vn.focus()}function Te(){if(Zn.getBoundingClientRect){var t=Zn.getBoundingClientRect();if(!Z||t.top!=t.bottom){var e=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>t.top||t.bottom>e)&&Zn.scrollIntoView()}}}function Ee(){var t=vn(Cr.inverted?Cr.from:Cr.to),e=On.lineWrapping?Math.min(t.x,Yn.offsetWidth):t.x;return ze(e,t.y,e,t.yBot)}function ze(t,e,n,r){var i=kn(),o=wn();e+=o,r+=o,t+=i,n+=i;var l=Un.clientHeight,a=Un.scrollTop,s=!1,u=!0;a>e?(Un.scrollTop=Math.max(0,e),s=!0):r>a+l&&(Un.scrollTop=r-l,s=!0);var f=Un.clientWidth,c=Un.scrollLeft,h=On.fixedGutter?Fn.clientWidth:0;return c+h>t?(50>t&&(t=0),Un.scrollLeft=Math.max(0,t-10-h),s=!0):n>f+c-3&&(Un.scrollLeft=n+10-f,s=!0,n>Kn.clientWidth&&(u=!1)),s&&On.onScroll&&On.onScroll(Nr),u}function He(){var t=Cn(),e=Un.scrollTop-wn(),n=Math.max(0,Math.floor(e/t)),r=Math.ceil((e+Un.clientHeight)/t);return{from:m(or,n),to:m(or,r)}}function Ne(t,e){function n(){xr=Un.clientWidth;var t=Jn.firstChild,e=!1;return or.iter(_r,Sr,function(n){if(!n.hidden){var r=Math.round(t.offsetHeight/f)||1;n.height!=r&&(L(n,r),gr=e=!0)}t=t.nextSibling}),e&&(Kn.style.height=or.height*f+2*wn()+"px"),e}if(!Un.clientWidth)return _r=Sr=Mr=0,void 0;var r=He();if(!(t!==!0&&0==t.length&&r.from>_r&&Sr>r.to)){var i=Math.max(r.from-100,0),o=Math.min(or.size,r.to+100);i>_r&&20>i-_r&&(i=_r),Sr>o&&20>Sr-o&&(o=Math.min(or.size,Sr));for(var l=t===!0?[]:We([{from:_r,to:Sr,domStart:0}],t),a=0,s=0;l.length>s;++s){var u=l[s];i>u.from&&(u.domStart+=i-u.from,u.from=i),u.to>o&&(u.to=o),u.from>=u.to?l.splice(s--,1):a+=u.to-u.from}if(a!=o-i){l.sort(function(t,e){return t.domStart-e.domStart});var f=Cn(),c=Fn.style.display;Jn.style.display="none",De(i,o,l),Jn.style.display=Fn.style.display="";var h=i!=_r||o!=Sr||Ar!=Un.clientHeight+f;if(h&&(Ar=Un.clientHeight+f),_r=i,Sr=o,Mr=g(or,i),jn.style.top=Mr*f+"px",Un.clientHeight&&(Kn.style.height=or.height*f+2*wn()+"px"),Jn.childNodes.length!=Sr-_r)throw Error("BAD PATCH! "+JSON.stringify(l)+" size="+(Sr-_r)+" nodes="+Jn.childNodes.length);return On.lineWrapping?n():(null==xr&&(xr=mn(Lr)),xr>Un.clientWidth?(Yn.style.width=xr+"px",Kn.style.width="",Kn.style.width=Un.scrollWidth+"px"):Yn.style.width=Kn.style.width=""),Fn.style.display=c,(h||gr)&&Oe()&&On.lineWrapping&&n()&&Oe(),Re(),!e&&On.onUpdate&&On.onUpdate(Nr),!0}}}function We(t,e){for(var n=0,r=e.length||0;r>n;++n){for(var i=e[n],o=[],l=i.diff||0,a=0,s=t.length;s>a;++a){var u=t[a];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l,domStart:u.domStart+(i.to-u.from)}))}t=o}return t}function De(t,e,n){function r(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var i=0,o=Jn.firstChild,l=0;n.length>l;++l){for(var a=n[l];a.domStart>i;)o=r(o),i++;for(var s=0,u=a.to-a.from;u>s;++s)o=o.nextSibling,i++}for(;o;)o=r(o)}else Jn.innerHTML="";var f=n.shift(),o=Jn.firstChild,s=t,c=document.createElement("div");or.iter(t,e,function(t){if(f&&f.to==s&&(f=n.shift()),!f||f.from>s){if(t.hidden)var e=c.innerHTML="<pre></pre>";else{var e="<pre"+(t.className?' class="'+t.className+'"':"")+">"+t.getHTML(nn)+"</pre>";t.bgClassName&&(e='<div style="position: relative"><pre class="'+t.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+e+"</div>")}c.innerHTML=e,Jn.insertBefore(c.firstChild,o)}else o=o.nextSibling;++s})}function Oe(){if(On.gutter||On.lineNumbers){var t=jn.offsetHeight,e=Un.clientHeight;Fn.style.height=(2>t-e?e:t)+"px";var n,r=[],i=_r;if(or.iter(_r,Math.max(Sr,_r+1),function(t){if(t.hidden)r.push("<pre></pre>");else{var e=t.gutterMarker,o=On.lineNumbers?i+On.firstLineNumber:null;e&&e.text?o=e.text.replace("%N%",null!=o?o:""):null==o&&(o=" "),r.push(e&&e.style?'<pre class="'+e.style+'">':"<pre>",o);for(var l=1;t.height>l;++l)r.push("<br/>&#160;");r.push("</pre>"),e||(n=i)}++i}),Fn.style.display="none",Gn.innerHTML=r.join(""),null!=n){for(var o=Gn.childNodes[n-_r],l=(or.size+"").length,a=z(o),s="";l>a.length+s.length;)s+=" ";s&&o.insertBefore(document.createTextNode(s),o.firstChild)}Fn.style.display="";var u=Math.abs((parseInt(Yn.style.marginLeft)||0)-Fn.offsetWidth)>2;return Yn.style.marginLeft=Fn.offsetWidth+"px",gr=!1,u}}function Re(){function t(t,e,n,r){u+='<div class="CodeMirror-selected" style="position: absolute; left: '+t+"px; top: "+e+"px; right: "+n+"px; height: "+r+'px"></div>'}var e=N(Cr.from,Cr.to),n=vn(Cr.from,!0),r=e?n:vn(Cr.to,!0),i=Cr.inverted?n:r,o=Cn(),l=E(Bn),a=E(Jn);if(Pn.style.top=Math.max(0,Math.min(Un.offsetHeight,i.y+a.top-l.top))+"px",Pn.style.left=Math.max(0,Math.min(Un.offsetWidth,i.x+a.left-l.left))+"px",e)Zn.style.top=i.y+"px",Zn.style.left=(On.lineWrapping?Math.min(i.x,Yn.offsetWidth):i.x)+"px",Zn.style.display="",$n.style.display="none";else{var s=n.y==r.y,u="",f=Yn.clientWidth||Yn.offsetWidth,c=Yn.clientHeight||Yn.offsetHeight;if(Cr.from.ch&&n.y>=0){var h=s?f-r.x:0;t(n.x,n.y,h,o)}var d=Math.max(0,n.y+(Cr.from.ch?o:0)),p=Math.min(r.y,c)-d;p>.2*o&&t(0,d,0,p),s&&Cr.from.ch||!(c-.5*o>r.y)||t(0,r.y,f-r.x,o),$n.innerHTML=u,Zn.style.display="none",$n.style.display=""}}function Ie(t){lr=t?lr||(Cr.inverted?Cr.to:Cr.from):null}function Be(t,e){var n=lr&&je(lr);n&&(W(n,t)?t=n:W(e,n)&&(e=n)),Pe(t,e),cr=!0}function Pe(t,e,n,r){if(Rr=null,null==n&&(n=Cr.from.line,r=Cr.to.line),!N(Cr.from,t)||!N(Cr.to,e)){if(W(e,t)){var i=e;e=t,t=i}if(t.line!=n){var o=Ve(t,n,Cr.from.ch);o?t=o:dn(t.line,!1)}if(e.line!=r&&(e=Ve(e,r,Cr.to.ch)),N(t,e)?Cr.inverted=!1:N(t,Cr.to)?Cr.inverted=!1:N(e,Cr.from)&&(Cr.inverted=!0),On.autoClearEmptyLines&&N(Cr.from,Cr.to)){var l=Cr.inverted?t:e;if(l.line!=Cr.from.line&&Cr.from.line<or.size){var a=b(Cr.from.line);/^\s+$/.test(a.text)&&setTimeout(Dn(function(){if(a.parent&&/^\s+$/.test(a.text)){var t=p(a);xe("",{line:t,ch:0},{line:t,ch:a.text.length})}},10))}}Cr.from=t,Cr.to=e,pr=!0}}function Ve(t,e,n){function r(e){for(var r=t.line+e,i=1==e?or.size:-1;r!=i;){var o=b(r);if(!o.hidden){var l=t.ch;return(l>n||l>o.text.length)&&(l=o.text.length),{line:r,ch:l}}r+=e}}var i=b(t.line);return i.hidden?t.line>=e?r(1)||r(-1):r(-1)||r(1):t}function Ue(t,e,n){var r=je({line:t,ch:e||0});(n?Be:Pe)(r,r)}function Ke(t){return Math.max(0,Math.min(t,or.size-1))}function je(t){if(0>t.line)return{line:0,ch:0};if(t.line>=or.size)return{line:or.size-1,ch:b(or.size-1).text.length};var e=t.ch,n=b(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:0>e?{line:t.line,ch:0}:t}function Fe(t,e){function n(){for(var e=o+t,n=0>t?-1:or.size;e!=n;e+=t){var r=b(e);if(!r.hidden)return o=e,a=r,!0}}function r(e){if(l==(0>t?0:a.text.length)){if(e||!n())return!1;l=0>t?a.text.length:0}else l+=t;return!0}var i=Cr.inverted?Cr.from:Cr.to,o=i.line,l=i.ch,a=b(o);if("char"==e)r();else if("column"==e)r(!0);else if("word"==e)for(var s=!1;!(0>t)||r();){if(B(a.text.charAt(l)))s=!0;else if(s){0>t&&(t=1,r());break}if(t>0&&!r())break}return{line:o,ch:l}}function Ge(t,e){var n=0>t?Cr.from:Cr.to;(lr||N(Cr.from,Cr.to))&&(n=Fe(t,e)),Ue(n.line,n.ch,!0)}function Ye(t,e){N(Cr.from,Cr.to)?0>t?xe("",Fe(t,e),Cr.to):xe("",Cr.from,Fe(t,e)):xe("",Cr.from,Cr.to),cr=!0}function Xe(t,e){var n=0,r=vn(Cr.inverted?Cr.from:Cr.to,!0);null!=Rr&&(r.x=Rr),"page"==e?n=Math.min(Un.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==e&&(n=Cn());var i=yn(r.x,r.y+n*t+2);"page"==e&&(Un.scrollTop+=vn(i,!0).y-r.y),Ue(i.line,i.ch,!0),Rr=r.x}function Ze(t){for(var e=b(t.line).text,n=t.ch,r=t.ch;n>0&&B(e.charAt(n-1));)--n;for(;e.length>r&&B(e.charAt(r));)++r;Be({line:t.line,ch:n},{line:t.line,ch:r})}function $e(t){Be({line:t,ch:0},je({line:t+1,ch:0}))}function Je(t){if(N(Cr.from,Cr.to))return qe(Cr.from.line,t);for(var e=Cr.to.line-(Cr.to.ch?0:1),n=Cr.from.line;e>=n;++n)qe(n,t)}function qe(t,e){if(e||(e="add"),"smart"==e)if(tr.indent)var n=Tn(t);else e="prev";var r,i=b(t),o=i.indentation(On.tabSize),l=i.text.match(/^\s*/)[0];"prev"==e?r=t?b(t-1).indentation(On.tabSize):0:"smart"==e?r=tr.indent(n,i.text.slice(l.length),i.text):"add"==e?r=o+On.indentUnit:"subtract"==e&&(r=o-On.indentUnit),r=Math.max(0,r);var a=r-o;if(a){var s="",u=0;if(On.indentWithTabs)for(var f=Math.floor(r/On.tabSize);f;--f)u+=On.tabSize,s+="	";for(;r>u;)++u,s+=" "}else{if(Cr.from.line!=t&&Cr.to.line!=t)return;var s=l}xe(s,{line:t,ch:0},{line:t,ch:l.length})}function Qe(){tr=t.getMode(On,On.mode),or.iter(0,or.size,function(t){t.stateAfter=null}),er=[0],Hn()}function tn(){var t=On.gutter||On.lineNumbers;Fn.style.display=t?"":"none",t?gr=!0:Jn.parentNode.style.marginLeft=0}function en(){if(On.lineWrapping){Bn.className+=" CodeMirror-wrap";var t=Un.clientWidth/bn()-3;or.iter(0,or.size,function(e){if(!e.hidden){var n=Math.ceil(e.text.length/t)||1;1!=n&&L(e,n)}}),Yn.style.width=Kn.style.width=""}else Bn.className=Bn.className.replace(" CodeMirror-wrap",""),xr=null,Lr="",or.iter(0,or.size,function(t){1==t.height||t.hidden||L(t,1),t.text.length>Lr.length&&(Lr=t.text)});hr.push({from:0,to:or.size})}function nn(t){var e=On.tabSize-t%On.tabSize,n=Tr[e];if(n)return n;for(var r='<span class="cm-tab">',i=0;e>i;++i)r+=" ";return Tr[e]={html:r+"</span>",width:e}}function rn(){Un.className=Un.className.replace(/\s*cm-s-\w+/g,"")+On.theme.replace(/(^|\s)\s*/g," cm-s-")}function on(){this.set=[]}function ln(t,e,n){function r(t,e,n,r){b(t).addMark(new a(e,n,r,i))}t=je(t),e=je(e);var i=new on;if(!W(t,e))return i;if(t.line==e.line)r(t.line,t.ch,e.ch,n);else{r(t.line,t.ch,null,n);for(var o=t.line+1,l=e.line;l>o;++o)r(o,null,null,n);r(e.line,null,e.ch,n)}return hr.push({from:t.line,to:e.line+1}),i}function an(t){t=je(t);var e=new s(t.ch);return b(t.line).addMark(e),e}function sn(t){t=je(t);var e=[],n=b(t.line).marked;if(!n)return e;for(var r=0,i=n.length;i>r;++r){var o=n[r];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker||o)}return e}function un(t,e,n){return"number"==typeof t&&(t=b(Ke(t))),t.gutterMarker={text:e,style:n},gr=!0,t}function fn(t){"number"==typeof t&&(t=b(Ke(t))),t.gutterMarker=null,gr=!0}function cn(t,e){var n=t,r=t;return"number"==typeof t?r=b(Ke(t)):n=p(t),null==n?null:e(r,n)?(hr.push({from:n,to:n+1}),r):null}function hn(t,e,n){return cn(t,function(t){return t.className!=e||t.bgClassName!=n?(t.className=e,t.bgClassName=n,!0):void 0})}function dn(t,e){return cn(t,function(t,n){if(t.hidden!=e){t.hidden=e,L(t,e?0:1);var r=Cr.from.line,i=Cr.to.line;if(e&&(r==n||i==n)){var o=r==n?Ve({line:r,ch:0},r,0):Cr.from,l=i==n?Ve({line:i,ch:0},i,0):Cr.to;if(!l)return;Pe(o,l)}return gr=!0}})}function pn(t){if("number"==typeof t){if(!y(t))return null;var e=t;if(t=b(t),!t)return null}else{var e=p(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className,bgClass:t.bgClassName}}function mn(t){return Xn.innerHTML="<pre><span>x</span></pre>",Xn.firstChild.firstChild.firstChild.nodeValue=t,Xn.firstChild.firstChild.offsetWidth||10}function gn(t,e){if(0==e)return{top:0,left:0};var n="";if(On.lineWrapping){var r=t.text.indexOf(" ",e+6);n=O(t.text.slice(e+1,0>r?t.text.length:r+(Z?5:0)))}Xn.innerHTML="<pre>"+t.getHTML(nn,e)+'<span id="CodeMirror-temp-'+Ur+'">'+O(t.text.charAt(e)||" ")+"</span>"+n+"</pre>";var i=document.getElementById("CodeMirror-temp-"+Ur),o=i.offsetTop,l=i.offsetLeft;if(Z&&0==o&&0==l){var a=document.createElement("span");a.innerHTML="x",i.parentNode.insertBefore(a,i.nextSibling),o=a.offsetTop}return{top:o,left:l}}function vn(t,e){var n,r=Cn(),i=r*(g(or,t.line)-(e?Mr:0));if(0==t.ch)n=0;else{var o=gn(b(t.line),t.ch);n=o.left,On.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function yn(t,e){function n(t){var e=gn(a,t);if(u){var n=Math.round(e.top/r);return Math.max(0,e.left+(n-f)*Un.clientWidth)}return e.left}0>e&&(e=0);var r=Cn(),i=bn(),o=Mr+Math.floor(e/r),l=m(or,o);if(l>=or.size)return{line:or.size-1,ch:b(or.size-1).text.length};var a=b(l),s=a.text,u=On.lineWrapping,f=u?o-g(or,l):0;if(0>=t&&0==f)return{line:l,ch:0};for(var c,h=0,d=0,p=s.length,v=Math.min(p,Math.ceil((t+.9*f*Un.clientWidth)/i));;){var y=n(v);if(!(t>=y&&p>v)){c=y,p=v;break}v=Math.min(p,Math.ceil(1.2*v))}if(t>c)return{line:l,ch:p};for(v=Math.floor(.8*p),y=n(v),t>y&&(h=v,d=y);;){if(1>=p-h)return{line:l,ch:c-t>t-d?h:p};var x=Math.ceil((h+p)/2),C=n(x);C>t?(p=x,c=C):(h=x,d=C)}}function xn(t){var e=vn(t,!0),n=E(Yn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function Cn(){if(null==Pr){Pr="<pre>";for(var t=0;49>t;++t)Pr+="x<br/>";Pr+="x</pre>"}var e=Jn.clientHeight;return e==Br?Ir:(Br=e,Xn.innerHTML=Pr,Ir=Xn.firstChild.offsetHeight/50||1,Xn.innerHTML="",Ir)}function bn(){return Un.clientWidth==Kr?Vr:(Kr=Un.clientWidth,Vr=mn("x"))}function wn(){return Yn.offsetTop}function kn(){return Yn.offsetLeft}function Mn(t,e){var n,r,i=E(Un,!0);try{n=t.clientX,r=t.clientY}catch(t){return null}if(!e&&(n-i.left>Un.clientWidth||r-i.top>Un.clientHeight))return null;var o=E(Yn,!0);return yn(n-o.left,r-o.top)}function _n(t){function e(){var t=re(Vn.value).join("\n");t!=o&&Dn(Ce)(t,"end"),Pn.style.position="relative",Vn.style.cssText=i,$&&(Un.scrollTop=r),mr=!1,Ae(!0),Me()}var n=Mn(t),r=Un.scrollTop;if(n&&!window.opera){(N(Cr.from,Cr.to)||W(n,Cr.from)||!W(n,Cr.to))&&Dn(Ue)(n.line,n.ch);var i=Vn.style.cssText;Pn.style.position="absolute",Vn.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",mr=!0;var o=Vn.value=ke();if(Le(),H(Vn),X){w(t);var l=S(window,"mouseup",function(){l(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function Sn(){clearInterval(Qn);var t=!0;Zn.style.visibility="",Qn=setInterval(function(){Zn.style.visibility=(t=!t)?"":"hidden"},650)}function An(t){function e(t,e,n){if(t.text)for(var r,i=t.styles,o=l?0:t.text.length-1,s=l?0:i.length-2,u=l?i.length:-2;s!=u;s+=2*a){var f=i[s];if(null==i[s+1]||i[s+1]==h){for(var c=l?0:f.length-1,m=l?f.length:-1;c!=m;c+=a,o+=a)if(o>=e&&n>o&&p.test(r=f.charAt(c))){var g=jr[r];if(">"==g.charAt(1)==l)d.push(r);else{if(d.pop()!=g.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=Cr.inverted?Cr.from:Cr.to,r=b(n.line),i=n.ch-1,o=i>=0&&jr[r.text.charAt(i)]||jr[r.text.charAt(++i)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=r.styles,u=i+1,f=0,c=s.length;c>f;f+=2)if(0>=(u-=s[f].length)){var h=s[f+1];break}for(var d=[r.text.charAt(i)],p=/[(){}[\]]/,f=n.line,c=l?Math.min(f+100,or.size):Math.max(-1,f-100);f!=c;f+=a){var r=b(f),m=f==n.line,g=e(r,m&&l?i+1:0,m&&!l?i:r.text.length);if(g)break}g||(g={pos:null,match:!1});var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",v=ln({line:n.line,ch:i},{line:n.line,ch:i+1},h),y=null!=g.pos&&ln({line:f,ch:g.pos},{line:f,ch:g.pos+1},h),x=Dn(function(){v.clear(),y&&y.clear()});t?setTimeout(x,800):yr=x}}function Ln(t){for(var e,n,r=t,i=t-40;r>i;--r){if(0==r)return 0;var o=b(r-1);if(o.stateAfter)return r;var l=o.indentation(On.tabSize);(null==n||e>l)&&(n=r-1,e=l)}return n}function Tn(t){var e=Ln(t),n=e&&b(e-1).stateAfter;return n=n?i(tr,n):o(tr),or.iter(e,t,function(t){t.highlight(tr,n,On.tabSize),t.stateAfter=i(tr,n)}),t>e&&hr.push({from:e,to:t}),or.size>t&&!b(t).stateAfter&&er.push(t),n}function En(t,e){var n=Tn(t);or.iter(t,e,function(t){t.highlight(tr,n,On.tabSize),t.stateAfter=i(tr,n)})}function zn(){for(var t=+new Date+On.workTime,e=er.length;er.length;){if(b(_r).stateAfter)var n=er.pop();else var n=_r;if(!(n>=or.size)){var r=Ln(n),l=r&&b(r-1).stateAfter;l=l?i(tr,l):o(tr);var a=0,s=tr.compareStates,u=!1,f=r,c=!1;if(or.iter(f,or.size,function(e){var r=e.stateAfter;if(+new Date>t)return er.push(f),Hn(On.workDelay),u&&hr.push({from:n,to:f+1}),c=!0;var o=e.highlight(tr,l,On.tabSize);if(o&&(u=!0),e.stateAfter=i(tr,l),s){if(r&&s(r,l))return!0}else if(o===!1&&r){if(++a>3&&(!tr.indent||tr.indent(r,"")==tr.indent(l,"")))return!0}else a=0;++f}),c)return;u&&hr.push({from:n,to:f+1})}}e&&On.onHighlightComplete&&On.onHighlightComplete(Nr)}function Hn(t){er.length&&ir.set(t,Dn(zn))}function Nn(){fr=cr=dr=null,hr=[],pr=!1,vr=[]}function Wn(){var t,e=!1;pr&&(e=!Ee()),hr.length?t=Ne(hr,!0):(pr&&Re(),gr&&Oe()),e&&Ee(),pr&&(Te(),Sn()),nr&&!mr&&(fr===!0||fr!==!1&&pr)&&Ae(cr),pr&&On.matchBrackets&&setTimeout(Dn(function(){yr&&(yr(),yr=null),N(Cr.from,Cr.to)&&An(!1)}),20);var n=dr,r=vr;pr&&On.onCursorActivity&&On.onCursorActivity(Nr),n&&On.onChange&&Nr&&On.onChange(Nr,n);for(var i=0;r.length>i;++i)r[i](Nr);t&&On.onUpdate&&On.onUpdate(Nr)}function Dn(t){return function(){Fr++||Nn();try{var e=t.apply(this,arguments)}finally{--Fr||Wn()}return e}}var On={},Rn=t.defaults;for(var In in Rn)Rn.hasOwnProperty(In)&&(On[In]=(f&&f.hasOwnProperty(In)?f:Rn)[In]);var Bn=document.createElement("div");Bn.className="CodeMirror"+(On.lineWrapping?" CodeMirror-wrap":""),Bn.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>',l.appendChild?l.appendChild(Bn):l(Bn);var Pn=Bn.firstChild,Vn=Pn.firstChild,Un=Bn.lastChild,Kn=Un.firstChild,jn=Kn.firstChild,Fn=jn.firstChild,Gn=Fn.firstChild,Yn=Fn.nextSibling.firstChild,Xn=Yn.firstChild,Zn=Xn.nextSibling,$n=Zn.nextSibling,Jn=$n.nextSibling;rn(),P&&(Vn.style.width="0px"),J||(Yn.draggable=!0),Yn.style.outline="none",null!=On.tabindex&&(Vn.tabIndex=On.tabindex),On.autofocus&&Le(),On.gutter||On.lineNumbers||(Fn.style.display="none"),Q&&(Pn.style.height="1px",Pn.style.position="absolute");try{mn("x")}catch(qn){throw qn.message.match(/runtime/i)&&(qn=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),qn}var Qn,tr,er,nr,rr=new A,ir=new A,or=new h([new c([new u("")])]);Qe();var lr,ar,sr,ur,fr,cr,hr,dr,pr,mr,gr,vr,yr,xr,Cr={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},br=0,wr=!1,kr=!1,Mr=0,_r=0,Sr=0,Ar=0,Lr="",Tr={};Dn(function(){T(On.value||""),fr=!1})();var Er=new v;S(Un,"mousedown",Dn(K)),S(Un,"dblclick",Dn(G)),S(Yn,"dragstart",ne),S(Yn,"selectstart",C),X||S(Un,"contextmenu",_n),S(Un,"scroll",function(){br=Un.scrollTop,Ne([]),On.fixedGutter&&(Fn.style.left=Un.scrollLeft+"px"),On.onScroll&&On.onScroll(Nr)}),S(window,"resize",function(){Ne(!0)}),S(Vn,"keyup",Dn(ce)),S(Vn,"input",_e),S(Vn,"keydown",Dn(ue)),S(Vn,"keypress",Dn(fe)),S(Vn,"focus",he),S(Vn,"blur",de),S(Un,"dragenter",w),S(Un,"dragover",w),S(Un,"drop",Dn(ee)),S(Un,"paste",function(){Le(),_e()}),S(Vn,"paste",_e),S(Vn,"cut",Dn(function(){On.readOnly||Ce("")})),Q&&S(Kn,"mouseup",function(){document.activeElement==Vn&&Vn.blur(),Le()});var zr;try{zr=document.activeElement==Vn}catch(qn){}zr||On.autofocus?setTimeout(he,20):de();var Hr,Nr=Bn.CodeMirror={getValue:U,setValue:Dn(T),getSelection:ke,replaceSelection:Dn(Ce),focus:function(){window.focus(),Le(),he(),_e()},setOption:function(t,e){var n=On[t];On[t]=e,"mode"==t||"indentUnit"==t?Qe():"readOnly"==t&&"nocursor"==e?(de(),Vn.blur()):"readOnly"!=t||e?"theme"==t?rn():"lineWrapping"==t&&n!=e?Dn(en)():"tabSize"==t&&Ne(!0):Ae(!0),("lineNumbers"==t||"gutter"==t||"firstLineNumber"==t||"theme"==t)&&(tn(),Ne(!0))},getOption:function(t){return On[t]},undo:Dn(ge),redo:Dn(ve),indentLine:Dn(function(t,e){"string"!=typeof e&&(e=null==e?On.smartIndent?"smart":"prev":e?"add":"subtract"),y(t)&&qe(t,e)}),indentSelection:Dn(Je),historySize:function(){return{undo:Er.done.length,redo:Er.undone.length}},clearHistory:function(){Er=new v},matchBrackets:Dn(function(){An(!0)}),getTokenAt:Dn(function(t){return t=je(t),b(t.line).getTokenAt(tr,Tn(t.line),t.ch)}),getStateAfter:function(t){return t=Ke(null==t?or.size-1:t),Tn(t+1)},cursorCoords:function(t,e){return null==t&&(t=Cr.inverted),this.charCoords(t?Cr.from:Cr.to,e)},charCoords:function(t,e){return t=je(t),"local"==e?vn(t,!1):"div"==e?vn(t,!0):xn(t)},coordsChar:function(t){var e=E(Yn);return yn(t.x-e.left,t.y-e.top)},markText:Dn(ln),setBookmark:an,findMarksAt:sn,setMarker:Dn(un),clearMarker:Dn(fn),setLineClass:Dn(hn),hideLine:Dn(function(t){return dn(t,!0)}),showLine:Dn(function(t){return dn(t,!1)}),onDeleteLine:function(t,e){if("number"==typeof t){if(!y(t))return null;t=b(t)}return(t.handlers||(t.handlers=[])).push(e),t},lineInfo:pn,addWidget:function(t,e,n,r,i){t=vn(je(t));var o=t.yBot,l=t.x;if(e.style.position="absolute",Kn.appendChild(e),"over"==r)o=t.y;else if("near"==r){var a=Math.max(Un.offsetHeight,or.height*Cn()),s=Math.max(Kn.clientWidth,Yn.clientWidth)-kn();t.yBot+e.offsetHeight>a&&t.y>e.offsetHeight&&(o=t.y-e.offsetHeight),l+e.offsetWidth>s&&(l=s-e.offsetWidth)}e.style.top=o+wn()+"px",e.style.left=e.style.right="","right"==i?(l=Kn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(Kn.clientWidth-e.offsetWidth)/2),e.style.left=l+kn()+"px"),n&&ze(l,o,l+e.offsetWidth,o+e.offsetHeight)
},lineCount:function(){return or.size},clipPos:je,getCursor:function(t){return null==t&&(t=Cr.inverted),D(t?Cr.from:Cr.to)},somethingSelected:function(){return!N(Cr.from,Cr.to)},setCursor:Dn(function(t,e,n){null==e&&"number"==typeof t.line?Ue(t.line,t.ch,n):Ue(t,e,n)}),setSelection:Dn(function(t,e,n){(n?Be:Pe)(je(t),je(e||t))}),getLine:function(t){return y(t)?b(t).text:void 0},getLineHandle:function(t){return y(t)?b(t):void 0},setLine:Dn(function(t,e){y(t)&&xe(e,{line:t,ch:0},{line:t,ch:b(t).text.length})}),removeLine:Dn(function(t){y(t)&&xe("",{line:t,ch:0},je({line:t+1,ch:0}))}),replaceRange:Dn(xe),getRange:function(t,e){return we(je(t),je(e))},triggerOnKeyDown:Dn(ue),execCommand:function(t){return F[t](Nr)},moveH:Dn(Ge),deleteH:Dn(Ye),moveV:Dn(Xe),toggleOverwrite:function(){wr?(wr=!1,Zn.className=Zn.className.replace(" CodeMirror-overwrite","")):(wr=!0,Zn.className+=" CodeMirror-overwrite")},posFromIndex:function(t){var e,n=0;return or.iter(0,or.size,function(r){var i=r.text.length+1;return i>t?(e=t,!0):(t-=i,++n,void 0)}),je({line:n,ch:e})},indexFromPos:function(t){if(0>t.line||0>t.ch)return 0;var e=t.ch;return or.iter(0,t.line,function(t){e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(Un.scrollLeft=t),null!=e&&(Un.scrollTop=e),Ne([])},operation:function(t){return Dn(t)()},refresh:function(){Ne(!0),Un.scrollHeight>br&&(Un.scrollTop=br)},getInputField:function(){return Vn},getWrapperElement:function(){return Bn},getScrollerElement:function(){return Un},getGutterElement:function(){return Fn}},Wr=null,Dr=!1,Or="",Rr=null;on.prototype.clear=Dn(function(){for(var t=1/0,e=-1/0,n=0,r=this.set.length;r>n;++n){var i=this.set[n],o=i.marked;if(o&&i.parent){var l=p(i);t=Math.min(t,l),e=Math.max(e,l);for(var a=0;o.length>a;++a)o[a].marker==this&&o.splice(a--,1)}}1/0!=t&&hr.push({from:t,to:e+1})}),on.prototype.find=function(){for(var t,e,n=0,r=this.set.length;r>n;++n)for(var i=this.set[n],o=i.marked,l=0;o.length>l;++l){var a=o[l];if(a.marker==this&&(null!=a.from||null!=a.to)){var s=p(i);null!=s&&(null!=a.from&&(t={line:s,ch:a.from}),null!=a.to&&(e={line:s,ch:a.to}))}}return{from:t,to:e}};var Ir,Br,Pr,Vr,Ur=Math.floor(16777215*Math.random()).toString(16),Kr=0,jr={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},Fr=0;for(var Gr in j)j.propertyIsEnumerable(Gr)&&!Nr.propertyIsEnumerable(Gr)&&(Nr[Gr]=j[Gr]);return Nr}function e(t){return"string"==typeof t?G[t]:t}function n(t,n,r,i){function o(n){n=e(n);var r=n[t];if(null!=r&&i(r))return!0;if(n.catchall)return i(n.catchall);var l=n.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return o(l);for(var a=0,s=l.length;s>a;++a)if(o(l[a]))return!0;return!1}return n&&o(n)?!0:o(r)}function r(t){var e=oe[_(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function i(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function o(t,e,n){return t.startState?t.startState(e,n):!0}function l(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8}function a(t,e,n,r){this.from=t,this.to=e,this.style=n,this.marker=r}function s(t){this.from=t,this.to=t,this.line=null}function u(t,e){this.styles=e||[t,null],this.text=t,this.height=1,this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function f(t,e,n,r){for(var i=0,o=0,l=0;e>o;i+=2){var a=n[i],s=o+a.length;0==l?(s>t&&r.push(a.slice(t-o,Math.min(a.length,e-o)),n[i+1]),s>=t&&(l=1)):1==l&&(s>e?r.push(a.slice(0,e-o),n[i+1]):r.push(a,n[i+1])),o=s}}function c(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,r=0;n>e;++e)t[e].parent=this,r+=t[e].height;this.height=r}function h(t){this.children=t;for(var e=0,n=0,r=0,i=t.length;i>r;++r){var o=t[r];e+=o.chunkSize(),n+=o.height,o.parent=this}this.size=e,this.height=n,this.parent=null}function d(t,e){for(;!t.lines;)for(var n=0;;++n){var r=t.children[n],i=r.chunkSize();if(i>e){t=r;break}e-=i}return t.lines[e]}function p(t){if(null==t.parent)return null;for(var e=t.parent,n=I(e.lines,t),r=e.parent;r;e=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=e;++i)n+=r.children[i].chunkSize()}return n}function m(t,e){var n=0;t:do{for(var r=0,i=t.children.length;i>r;++r){var o=t.children[r],l=o.height;if(l>e){t=o;continue t}e-=l,n+=o.chunkSize()}return n}while(!t.lines);for(var r=0,i=t.lines.length;i>r;++r){var a=t.lines[r],s=a.height;if(s>e)break;e-=s}return n+r}function g(t,e){var n=0;t:do{for(var r=0,i=t.children.length;i>r;++r){var o=t.children[r],l=o.chunkSize();if(l>e){t=o;continue t}e-=l,n+=o.height}return n}while(!t.lines);for(var r=0;e>r;++r)n+=t.lines[r].height;return n}function v(){this.time=0,this.done=[],this.undone=[]}function y(){w(this)}function x(t){return t.stop||(t.stop=y),t}function C(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function b(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function w(t){C(t),b(t)}function k(t){return t.target||t.srcElement}function M(t){return t.which?t.which:1&t.button?1:2&t.button?3:4&t.button?2:void 0}function _(t,e){var n=t.override&&t.override.hasOwnProperty(e);return n?t.override[e]:t[e]}function S(t,e,n,r){if("function"==typeof t.addEventListener){if(t.addEventListener(e,n,!1),r)return function(){t.removeEventListener(e,n,!1)}}else{var i=function(t){n(t||window.event)};if(t.attachEvent("on"+e,i),r)return function(){t.detachEvent("on"+e,i)}}}function A(){this.id=null}function L(t,e,n){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var r=0,i=0;e>r;++r)"	"==t.charAt(r)?i+=n-i%n:++i;return i}function T(t){return t.currentStyle?t.currentStyle:window.getComputedStyle(t,null)}function E(t,e){for(var n=t.ownerDocument.body,r=0,i=0,o=!1,l=t;l;l=l.offsetParent){var a=l.offsetLeft,s=l.offsetTop;l==n?(r+=Math.abs(a),i+=Math.abs(s)):(r+=a,i+=s),e&&"fixed"==T(l).position&&(o=!0)}for(var u=e&&!o?null:n,l=t.parentNode;l!=u;l=l.parentNode)null!=l.scrollLeft&&(r-=l.scrollLeft,i-=l.scrollTop);return{left:r,top:i}}function z(t){return t.textContent||t.innerText||t.nodeValue||""}function H(t){P?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function N(t,e){return t.line==e.line&&t.ch==e.ch}function W(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function D(t){return{line:t.line,ch:t.ch}}function O(t){return ne.textContent=t,ne.innerHTML}function R(t,e){if(!e)return 0;if(!t)return e.length;for(var n=t.length,r=e.length;n>=0&&r>=0&&t.charAt(n)==e.charAt(r);--n,--r);return r+1}function I(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;++n)if(t[n]==e)return n;return-1}function B(t){return/\w/.test(t)||t.toUpperCase()!=t.toLowerCase()}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var P=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),V=P||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var U=t.modes={},K=t.mimeModes={};t.defineMode=function(e,n){t.defaults.mode||"null"==e||(t.defaults.mode=e),U[e]=n},t.defineMIME=function(t,e){K[t]=e},t.resolveMode=function(e){if("string"==typeof e&&K.hasOwnProperty(e))e=K[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),r=U[n.name];return r?r(e,n):(window.console&&console.warn("No mode "+n.name+" found, falling back to plain text."),t.getMode(e,"text/plain"))},t.listModes=function(){var t=[];for(var e in U)U.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in K)K.propertyIsEnumerable(e)&&t.push({mime:e,mode:K[e]});return t};var j=t.extensions={};t.defineExtension=function(t,e){j[t]=e};var F=t.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),r=!N(e,n);r||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,r?n:{line:e.line}):t.replaceRange("",e,{line:e.line+1,ch:0})},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e})},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.setCursor(0,0,!0)},goDocEnd:function(t){t.setSelection({line:t.lineCount()-1},null,!0)},goLineStart:function(t){t.setCursor(t.getCursor().line,0,!0)},goLineStartSmart:function(t){var e=t.getCursor(),n=t.getLine(e.line),r=Math.max(0,n.search(/\S/));t.setCursor(e.line,r>=e.ch&&e.ch?0:r,!0)},goLineEnd:function(t){t.setSelection({line:t.getCursor().line},null,!0)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharLeft:function(t){t.deleteH(-1,"char")},delCharRight:function(t){t.deleteH(1,"char")},delWordLeft:function(t){t.deleteH(-1,"word")},delWordRight:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){t.replaceSelection("\n","end"),t.indentLine(t.getCursor().line)},toggleOverwrite:function(t){t.toggleOverwrite()}},G=t.keyMap={};G.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"insertTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},G.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},G.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},G["default"]=V?G.macDefault:G.pcDefault,G.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.fromTextArea=function(e,n){function r(){e.value=a.getValue()}function i(){r(),e.form.submit=l,e.form.submit(),e.form.submit=i}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),null==n.autofocus&&null!=e.getAttribute("autofocus")&&(n.autofocus=!0),e.form){var o=S(e.form,"submit",r,!0);if("function"==typeof e.form.submit){var l=e.form.submit;e.form.submit=i}}e.style.display="none";var a=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return a.save=r,a.getTextArea=function(){return e},a.toTextArea=function(){r(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(o(),"function"==typeof e.form.submit&&(e.form.submit=l))},a},t.copyState=i,t.startState=o,l.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return L(this.string,this.start,this.tabSize)},indentation:function(){return L(this.string,null,this.tabSize)},match:function(t,e,n){function r(t){return n?t.toLowerCase():t}if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&e!==!1&&(this.pos+=i[0].length),i}return r(this.string).indexOf(r(t),this.pos)==this.pos?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=l,a.prototype={attach:function(t){this.marker.set.push(t)},detach:function(t){var e=I(this.marker.set,t);e>-1&&this.marker.set.splice(e,1)},split:function(t,e){if(t>=this.to&&null!=this.to)return null;var n=t>this.from||null==this.from?null:this.from-t+e,r=null==this.to?null:this.to-t+e;return new a(n,r,this.style,this.marker)},dup:function(){return new a(null,null,this.style,this.marker)},clipTo:function(t,e,n,r,i){t&&r>this.from&&(this.to>r||null==this.to)?this.from=null:null!=this.from&&this.from>=e&&(this.from=Math.max(r,this.from)+i),n&&(this.to>e||null==this.to)&&(e>this.from||null==this.from)?this.to=null:null!=this.to&&this.to>e&&(this.to=this.to>r?this.to+i:e)},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(t){return this.marker==t.marker}},s.prototype={attach:function(t){this.line=t},detach:function(t){this.line==t&&(this.line=null)},split:function(t,e){return this.from>t?(this.from=this.to=this.from-t+e,this):void 0},isDead:function(){return this.from>this.to},clipTo:function(t,e,n,r,i){(t||this.from>e)&&(n||r>this.to)?(this.from=0,this.to=-1):this.from>e&&(this.from=this.to=Math.max(r,this.from)+i)},sameSet:function(){return!1},find:function(){return this.line&&this.line.parent?{line:p(this.line),ch:this.from}:null},clear:function(){if(this.line){var t=I(this.line.marked,this);-1!=t&&this.line.marked.splice(t,1),this.line=null}}},u.inheritMarks=function(t,e){var n=new u(t),r=e&&e.marked;if(r)for(var i=0;r.length>i;++i)if(null==r[i].to&&r[i].style){var o=n.marked||(n.marked=[]),l=r[i],a=l.dup();o.push(a),a.attach(n)}return n},u.prototype={replace:function(t,e,n){var r=[],i=this.marked,o=null==e?this.text.length:e;if(f(0,t,this.styles,r),n&&r.push(n,null),f(o,this.text.length,this.styles,r),this.styles=r,this.text=this.text.slice(0,t)+n+this.text.slice(o),this.stateAfter=null,i)for(var l=n.length-(o-t),a=0;i.length>a;++a){var s=i[a];s.clipTo(null==t,t||0,null==e,o,l),s.isDead()&&(s.detach(this),i.splice(a--,1))}},split:function(t,e){var n=[e,null],r=this.marked;f(t,this.text.length,this.styles,n);var i=new u(e+this.text.slice(t),n);if(r)for(var o=0;r.length>o;++o){var l=r[o],a=l.split(t,e.length);a&&(i.marked||(i.marked=[]),i.marked.push(a),a.attach(i),a==l&&r.splice(o--,1))}return i},append:function(t){var e=this.text.length,n=t.marked,r=this.marked;if(this.text+=t.text,f(0,t.text.length,t.styles,this.styles),r)for(var i=0;r.length>i;++i)null==r[i].to&&(r[i].to=e);if(n&&n.length){r||(this.marked=r=[]);t:for(var i=0;n.length>i;++i){var o=n[i];if(!o.from)for(var l=0;r.length>l;++l){var a=r[l];if(a.to==e&&a.sameSet(o)){a.to=null==o.to?null:o.to+e,a.isDead()&&(a.detach(this),n.splice(i--,1));continue t}}r.push(o),o.attach(this),o.from+=e,null!=o.to&&(o.to+=e)}}},fixMarkEnds:function(t){var e=this.marked,n=t.marked;if(e)for(var r=0;e.length>r;++r){var i=e[r],o=null==i.to;if(o&&n)for(var l=0;n.length>l;++l)if(n[l].sameSet(i)){o=!1;break}o&&(i.to=this.text.length)}},fixMarkStarts:function(){var t=this.marked;if(t)for(var e=0;t.length>e;++e)null==t[e].from&&(t[e].from=0)},addMark:function(t){t.attach(this),null==this.marked&&(this.marked=[]),this.marked.push(t),this.marked.sort(function(t,e){return(t.from||0)-(e.from||0)})},highlight:function(t,e,n){var r,i=new l(this.text,n),o=this.styles,a=0,s=!1,u=o[0];for(""==this.text&&t.blankLine&&t.blankLine(e);!i.eol();){var f=t.token(i,e),c=this.text.slice(i.start,i.pos);if(i.start=i.pos,a&&o[a-1]==f?o[a-2]+=c:c&&(!s&&(o[a+1]!=f||a&&o[a-2]!=r)&&(s=!0),o[a++]=c,o[a++]=f,r=u,u=o[a]),i.pos>5e3){o[a++]=this.text.slice(i.pos),o[a++]=null;break}}return o.length!=a&&(o.length=a,s=!0),a&&o[a-2]!=r&&(s=!0),s||(5>o.length&&10>this.text.length?null:!1)},getTokenAt:function(t,e,n){for(var r=this.text,i=new l(r);n>i.pos&&!i.eol();){i.start=i.pos;var o=t.token(i,e)}return{start:i.start,end:i.pos,string:i.current(),className:o||null,state:e}},indentation:function(t){return L(this.text,null,t)},getHTML:function(t,e){function n(e,n){if(e){if(l&&Z&&" "==e.charAt(0)&&(e=" "+e.slice(1)),l=!1,-1==e.indexOf("	")){a+=e.length;var r=O(e)}else for(var r="",i=0;;){var s=e.indexOf("	",i);if(-1==s){r+=O(e.slice(i)),a+=e.length-i;break}a+=s-i;var u=t(a);r+=O(e.slice(i,s))+u.html,a+=u.width,i=s+1}n?o.push('<span class="',n,'">',r,"</span>"):o.push(r)}}function r(t){return t?"cm-"+t.replace(/ +/g," cm-"):null}function i(){for(var t;f.length>y&&((t=f[y]).from==d||null==t.from);)null!=t.style&&v.push(t),++y;g=f.length>y?f[y].from:1/0;for(var e=0;v.length>e;++e){var n=v[e].to||1/0;n==d?v.splice(e--,1):g=Math.min(n,g)}}var o=[],l=!0,a=0,s=this.styles,u=this.text,f=this.marked,c=u.length;if(null!=e&&(c=Math.min(e,c)),u||null!=e)if(f&&f.length)for(var h,d=0,p=0,m="",g=f[0].from||0,v=[],y=0;c>d;){g==d&&i();for(var x=Math.min(c,g);;){if(m){for(var C=d+m.length,b=h,w=0;v.length>w;++w)b=(b?b+" ":"")+v[w].style;if(n(C>x?m.slice(0,x-d):m,b),C>=x){m=m.slice(x-d),d=x;break}d=C}m=s[p++],h=r(s[p++])}}else for(var p=0,k=0;c>k;p+=2){var M=s[p],h=s[p+1],_=M.length;k+_>c&&(M=M.slice(0,c-k)),k+=_,n(M,r(h))}else n(" ");return o.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var t=0,e=this.marked.length;e>t;++t)this.marked[t].detach(this)}},c.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,n){for(var r=t,i=t+e;i>r;++r){var o=this.lines[r];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;o.handlers.length>l;++l)n.push(o.handlers[l])}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines.splice.apply(this.lines,[t,0].concat(e));for(var r=0,i=e.length;i>r;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;r>t;++t)if(n(this.lines[t]))return!0}},h.prototype={chunkSize:function(){return this.size},remove:function(t,e,n){this.size-=e;for(var r=0;this.children.length>r;++r){var i=this.children[r],o=i.chunkSize();if(o>t){var l=Math.min(e,o-t),a=i.height;if(i.remove(t,l,n),this.height-=a-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(e-=l))break;t=0}else t-=o}if(25>this.size-e){var s=[];this.collapse(s),this.children=[new c(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,r=0,i=e.length;i>r;++r)n+=e[r].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>=t){if(o.insertHeight(t,e,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),s=new c(a);o.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new h(e);if(t.parent){t.size-=n.size,t.height-=n.height;var r=I(t.parent.children,t);t.parent.children.splice(r+1,0,n)}else{var i=new h(t.children);i.parent=t,t.children=[i,n],t=i}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>t){var a=Math.min(e,l-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=l}}},v.prototype={addChange:function(t,e,n){this.undone.length=0;var r=+new Date,i=this.done[this.done.length-1],o=i&&i[i.length-1],l=r-this.time;if(l>400||!o)this.done.push([{start:t,added:e,old:n}]);else if(o.start>t+n.length||o.start+o.added<t-o.added+o.old.length)i.push({start:t,added:e,old:n});else{var a=0;if(o.start>t){for(var s=o.start-t-1;s>=0;--s)o.old.unshift(n[s]);a=Math.min(0,e-n.length),o.added+=o.start-t+a,o.start=t}else t>o.start&&(a=t-o.start,e+=a);for(var s=o.added-a,u=n.length;u>s;++s)o.old.push(n[s]);e>o.added&&(o.added=e)}this.time=r}},t.e_stop=w,t.e_preventDefault=C,t.e_stopPropagation=b,t.connect=S,A.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var Y=t.Pass={toString:function(){return"CodeMirror.Pass"}},X=/gecko\/\d{7}/i.test(navigator.userAgent),Z=/MSIE \d/.test(navigator.userAgent),$=/MSIE [1-8]\b/.test(navigator.userAgent),J=/WebKit\//.test(navigator.userAgent),q=/Chrome\//.test(navigator.userAgent),Q=/KHTML\//.test(navigator.userAgent),te=function(){if($)return!1;var t=document.createElement("div");return"draggable"in t||"dragDrop"in t}(),ee="\n";(function(){var t=document.createElement("textarea");t.value="foo\nbar",t.value.indexOf("\r")>-1&&(ee="\r\n")})(),null!=document.documentElement.getBoundingClientRect&&(E=function(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n});var ne=document.createElement("pre");"\na"==O("a")?O=function(t){return ne.textContent=t,ne.innerHTML.slice(1)}:"	"!=O("	")&&(O=function(t){return ne.innerHTML="",ne.appendChild(document.createTextNode(t)),ne.innerHTML}),t.htmlEscape=O;var re=3!="\n\nb".split(/\n/).length?function(t){for(var e,n=0,r=[];(e=t.indexOf("\n",n))>-1;)r.push(t.slice(n,"\r"==t.charAt(e-1)?e-1:e)),n=e+1;return r.push(t.slice(n)),r}:function(t){return t.split(/\r?\n/)};t.splitLines=re;var ie=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(n){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1};t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var oe={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return t.keyNames=oe,function(){for(var t=0;10>t;t++)oe[t+48]=t+"";for(var t=65;90>=t;t++)oe[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)oe[t+111]=oe[t+63235]="F"+t}(),t}();CodeMirror.defineMode("javascript",function(t,e){function n(t,e,n){return e.tokenize=n,n(t,e)}function r(t,e){for(var n,r=!1;null!=(n=t.next());){if(n==e&&!r)return!1;r=!r&&"\\"==n}return r}function i(t,e,n){return O=t,R=n,e}function o(t,e){var o=t.next();if('"'==o||"'"==o)return n(t,e,l(o));if(/[\[\]{}\(\),;\:\.]/.test(o))return i(o);if("0"==o&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(o))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==o)return t.eat("*")?n(t,e,a):t.eat("/")?(t.skipToEnd(),i("comment","comment")):e.reAllowed?(r(t,"/"),t.eatWhile(/[gimy]/),i("regexp","string-2")):(t.eatWhile(V),i("operator",null,t.current()));if("#"==o)return t.skipToEnd(),i("error","error");if(V.test(o))return t.eatWhile(V),i("operator",null,t.current());t.eatWhile(/[\w\$_]/);var s=t.current(),u=P.propertyIsEnumerable(s)&&P[s];return u&&e.kwAllowed?i(u.type,u.style,s):i("variable","variable",s)}function l(t){return function(e,n){return r(e,t)||(n.tokenize=o),i("string","string")}}function a(t,e){for(var n,r=!1;n=t.next();){if("/"==n&&r){e.tokenize=o;break}r="*"==n}return i("comment","comment")}function s(t,e,n,r,i,o){this.indented=t,this.column=e,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function u(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0}function f(t,e,n,r,i){var o=t.cc;for(K.state=t,K.stream=i,K.marked=null,K.cc=o,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var l=o.length?o.pop():B?C:x;if(l(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return K.marked?K.marked:"variable"==n&&u(t,r)?"variable-2":e}}}function c(){for(var t=arguments.length-1;t>=0;t--)K.cc.push(arguments[t])}function h(){return c.apply(null,arguments),!0}function d(t){var e=K.state;if(e.context){K.marked="def";for(var n=e.localVars;n;n=n.next)if(n.name==t)return;e.localVars={name:t,next:e.localVars}}}function p(){K.state.context||(K.state.localVars=j),K.state.context={prev:K.state.context,vars:K.state.localVars}}function m(){K.state.localVars=K.state.context.vars,K.state.context=K.state.context.prev}function g(t,e){var n=function(){var n=K.state;n.lexical=new s(n.indented,K.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function v(){var t=K.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function y(t){return function(e){return e==t?h():";"==t?c():h(arguments.callee)}}function x(t){return"var"==t?h(g("vardef"),L,y(";"),v):"keyword a"==t?h(g("form"),C,x,v):"keyword b"==t?h(g("form"),x,v):"{"==t?h(g("}"),A,v):";"==t?h():"function"==t?h(W):"for"==t?h(g("form"),y("("),g(")"),E,y(")"),v,x,v):"variable"==t?h(g("stat"),k):"switch"==t?h(g("form"),C,g("}","switch"),y("{"),A,v,v):"case"==t?h(C,y(":")):"default"==t?h(y(":")):"catch"==t?h(g("form"),p,y("("),D,y(")"),x,v,m):c(g("stat"),C,y(";"),v)}function C(t){return U.hasOwnProperty(t)?h(w):"function"==t?h(W):"keyword c"==t?h(b):"("==t?h(g(")"),b,y(")"),v,w):"operator"==t?h(C):"["==t?h(g("]"),S(C,"]"),v,w):"{"==t?h(g("}"),S(_,"}"),v,w):h()}function b(t){return t.match(/[;\}\)\],]/)?c():c(C)}function w(t,e){if("operator"==t&&/\+\+|--/.test(e))return h(w);if("operator"==t)return h(C);if(";"!=t)return"("==t?h(g(")"),S(C,")"),v,w):"."==t?h(M,w):"["==t?h(g("]"),C,y("]"),v,w):void 0}function k(t){return":"==t?h(v,x):c(w,y(";"),v)}function M(t){return"variable"==t?(K.marked="property",h()):void 0}function _(t){return"variable"==t&&(K.marked="property"),U.hasOwnProperty(t)?h(y(":"),C):void 0}function S(t,e){function n(r){return","==r?h(t,n):r==e?h():h(y(e))}return function(r){return r==e?h():c(t,n)}}function A(t){return"}"==t?h():c(x,A)}function L(t,e){return"variable"==t?(d(e),h(T)):h()}function T(t,e){return"="==e?h(C,T):","==t?h(L):void 0}function E(t){return"var"==t?h(L,H):";"==t?c(H):"variable"==t?h(z):c(H)}function z(t,e){return"in"==e?h(C):h(w,H)}function H(t,e){return";"==t?h(N):"in"==e?h(C):h(C,y(";"),N)}function N(t){")"!=t&&h(C)}function W(t,e){return"variable"==t?(d(e),h(W)):"("==t?h(g(")"),p,S(D,")"),v,x,m):void 0}function D(t,e){return"variable"==t?(d(e),h()):void 0}var O,R,I=t.indentUnit,B=e.json,P=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),r=t("keyword c"),i=t("operator"),o={type:"atom",style:"atom"};return{"if":e,"while":e,"with":e,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":t("var"),"const":t("var"),let:t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o}}(),V=/[+\-*&%=<>!?|]/,U={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},K={state:null,column:null,marked:null,cc:null},j={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(t){return{tokenize:o,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new s((t||0)-I,0,"block",!1),localVars:e.localVars,context:e.localVars&&{vars:e.localVars},indented:0}},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==O?n:(e.reAllowed=!("operator"!=O&&"keyword c"!=O&&!O.match(/^[\[{}\(,;:]$/)),e.kwAllowed="."!=O,f(e,n,O,R,t))},indent:function(t,e){if(t.tokenize!=o)return 0;var n=e&&e.charAt(0),r=t.lexical,i=r.type,l=n==i;return"vardef"==i?r.indented+4:"form"==i&&"{"==n?r.indented:"stat"==i||"form"==i?r.indented+I:"switch"!=r.info||l?r.align?r.column+(l?0:1):r.indented+(l?0:I):r.indented+(/^(?:case|default)\b/.test(e)?I:2*I)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});